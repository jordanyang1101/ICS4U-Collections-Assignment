import java.util.*;


public class Main {
    public static void main(String[] args) {
        Scanner input = new Scanner(System.in);
        VotingSystem votingSystem = new VotingSystem();

        votingSystem.getNumCandidates();

        boolean votingIsActive = true;
        while (votingIsActive) {
            votingSystem.displayCandidates();
            System.out.print("Enter the ID of the candidate you want to vote for, (-1 to close voting): ");
            String choiceStr = input.nextLine();
            //try catch statement for bulletproofing
            try {
                int choice = Integer.parseInt(choiceStr);
                //ends the voting
                if (choice == -1) {
                    votingIsActive = false;
                }
                else {
                    votingSystem.getVote(choice);
                }
            }
            catch (NumberFormatException e) {
                System.out.println("Invalid input");
            }
        }

        System.out.println("Voting has ended.");
        votingSystem.displayResults();

        List<Candidate> winners = votingSystem.getWinners();
        if (winners.size() == 1) {
            System.out.println("The winner is: " + winners.get(0).getName());
        }
        else {
            System.out.println("It's a tie between the following candidates:");
            for (Candidate winner : winners) {
                System.out.println(winner.getName());
            }
        }
    }
}
